{% extends 'main.html' %}
{% block title %}Dashboard{% endblock %}

{% block scripts %}
<script src="/js/commentator-dashboard-client.js" charset="utf-8"></script>
{% endblock %}

{% block body %}

<input type="hidden" name="gameId" id="gameId" value="{{ gameId }}">

{% set firstRun = true %}

{% for team in teams %}
<div class="col-md-4 text-center jumbotron">

  <div class="well">
    <h3 class="bg-primary">{{ team.name }}</h3>
  </div>

  <div class="well">
    <h1 id="{{ team._id.toString() }}">{{ team.score }}</h1>
  </div>
  <div class="panel panel-success">
    <div class="panel-heading">Chasers</div>
    <div class="panel-body">
      {% for player in team.players %}
      {% if player.position == 'Chaser' %}
      <button type="button" class="btn btn-default" onclick="select(this, '{{ player._id.toString() }}')"><span class="badge">{{ player.number }}</span> {{ player.name }}</button><br />
      {% endif %}
      {% endfor %}
    </div>
  </div>
  <br>
  <div class="panel panel-success">
    <div class="panel-heading">Keeper</div>
    <div class="panel-body">
      {% for player in team.players %}
      {% if player.position == 'Keeper' %}
      <button type="button" class="btn btn-default" onclick="select(this, '{{ player._id.toString() }}')"><span class="badge">{{ player.number }}</span> {{ player.name }}</button><br />
      {% endif %}
      {% endfor %}
    </div>
  </div>
  <br>
  <div class="panel panel-success">
    <div class="panel-heading">Seeker</div>
    <div class="panel-body">
      {% for player in team.players %}
      {% if player.position == 'Seeker' %}
      <button type="button" class="btn btn-default" onclick="select(this, '{{ player._id.toString() }}')"><span class="badge">{{ player.number }}</span> {{ player.name }}</button><br />
      {% endif %}
      {% endfor %}
    </div>
  </div>
  <br>
</div>

{% if firstRun == true %}
<div class="col-md-4 text-center">
  <div class="well">
    <div id="notification" class="alert alert-danger" hidden="true"></div>

    {% if snitch.caughtOn !== undefined %}
    <div class="alert alert-success">
      <p>
        <b>GAME ENDED ON {{ snitch.caughtOn.toLocaleString() }}!</b> Snitch was caught by {{ snitch.caughtBy.name }}.
      </p>
    </div>
    {% endif %}

    <button type="button" class="btn btn-default" onclick="goal()">Goal Made</button>
    <button type="button" class="btn btn-default" onclick="miss()">Goal Missed</button>
    <br>
    <button type="button" class="btn btn-default" onclick="block()">Goal Blocked</button>
    <br>
    <button type="button" class="btn btn-default" onclick="snitchAppeared()">Snitch Appeared</button>
    <button type="button" class="btn btn-danger" onclick="end()">Snitch Caught</button>
    <br>
    <br>
  </div>
  <div class="list-group">
    <a class="list-group-item" href="/game/{{ gameId }}/box-score">BOX SCORE STATS</a>
    <br>
    <a class="list-group-item" href="/game/{{ gameId }}/play-by-play">PLAY BY PLAY</a>
  </div>
</div>
{% endif %}

{% set firstRun = false %}
{% endfor %}

{% if teams.length === 0 %}
<div class="col-md-12 text-center">
  <h1>No data initialized</h1>
</div>
{% endif %}

{% endblock %}
